{"id":"c6e410bc-5e2c-460b-ae81-c91b6094fbb1","revision":0,"last_node_id":69,"last_link_id":76,"nodes":[{"id":39,"type":"WanVideoBlockSwap","pos":[-516.0247802734375,-303.8445129394531],"size":[315,154],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"blocks_to_swap","name":"blocks_to_swap","type":"INT","widget":{"name":"blocks_to_swap"},"link":null},{"localized_name":"offload_img_emb","name":"offload_img_emb","type":"BOOLEAN","widget":{"name":"offload_img_emb"},"link":null},{"localized_name":"offload_txt_emb","name":"offload_txt_emb","type":"BOOLEAN","widget":{"name":"offload_txt_emb"},"link":null},{"localized_name":"use_non_blocking","name":"use_non_blocking","shape":7,"type":"BOOLEAN","widget":{"name":"use_non_blocking"},"link":null},{"localized_name":"vace_blocks_to_swap","name":"vace_blocks_to_swap","shape":7,"type":"INT","widget":{"name":"vace_blocks_to_swap"},"link":null}],"outputs":[{"localized_name":"block_swap_args","name":"block_swap_args","type":"BLOCKSWAPARGS","slot_index":0,"links":[50]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b5cae8bf1a7b348e9c9fa230640be7e11c573ca9","Node name for S&R":"WanVideoBlockSwap","widget_ue_connectable":{}},"widgets_values":[15,false,false,true,0],"color":"#223","bgcolor":"#335"},{"id":42,"type":"Note","pos":[-870.2029418945312,-290.80419921875],"size":[314.96246337890625,152.77333068847656],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["Adjust the blocks to swap based on your VRAM, this is a tradeoff between speed and memory usage.\n\nAlternatively there's option to use VRAM management introduced in DiffSynt-Studios. This is usually slower, but saves even more VRAM compared to BlockSwap"],"color":"#432","bgcolor":"#653"},{"id":11,"type":"LoadWanVideoT5TextEncoder","pos":[-78.41327667236328,28.1650333404541],"size":[377.1661376953125,130],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"precision","name":"precision","type":"COMBO","widget":{"name":"precision"},"link":null},{"localized_name":"load_device","name":"load_device","shape":7,"type":"COMBO","widget":{"name":"load_device"},"link":null},{"localized_name":"quantization","name":"quantization","shape":7,"type":"COMBO","widget":{"name":"quantization"},"link":null}],"outputs":[{"localized_name":"wan_t5_model","name":"wan_t5_model","type":"WANTEXTENCODER","slot_index":0,"links":[15]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b5cae8bf1a7b348e9c9fa230640be7e11c573ca9","Node name for S&R":"LoadWanVideoT5TextEncoder","widget_ue_connectable":{}},"widgets_values":["umt5-xxl-enc-bf16.safetensors","bf16","offload_device","fp8_e4m3fn"],"color":"#332922","bgcolor":"#593930"},{"id":28,"type":"WanVideoDecode","pos":[1718.39306640625,-410.5219421386719],"size":[315,198],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","link":43},{"localized_name":"samples","name":"samples","type":"LATENT","link":33},{"localized_name":"enable_vae_tiling","name":"enable_vae_tiling","type":"BOOLEAN","widget":{"name":"enable_vae_tiling"},"link":null},{"localized_name":"tile_x","name":"tile_x","type":"INT","widget":{"name":"tile_x"},"link":null},{"localized_name":"tile_y","name":"tile_y","type":"INT","widget":{"name":"tile_y"},"link":null},{"localized_name":"tile_stride_x","name":"tile_stride_x","type":"INT","widget":{"name":"tile_stride_x"},"link":null},{"localized_name":"tile_stride_y","name":"tile_stride_y","type":"INT","widget":{"name":"tile_stride_y"},"link":null},{"localized_name":"normalization","name":"normalization","shape":7,"type":"COMBO","widget":{"name":"normalization"},"link":null}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","slot_index":0,"links":[36]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b5cae8bf1a7b348e9c9fa230640be7e11c573ca9","Node name for S&R":"WanVideoDecode","widget_ue_connectable":{}},"widgets_values":[true,272,272,144,128,"default"],"color":"#322","bgcolor":"#533"},{"id":38,"type":"WanVideoVAELoader","pos":[1722.4056396484375,-578.1286010742188],"size":[315,82],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"precision","name":"precision","shape":7,"type":"COMBO","widget":{"name":"precision"},"link":null}],"outputs":[{"localized_name":"vae","name":"vae","type":"WANVAE","slot_index":0,"links":[43]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b5cae8bf1a7b348e9c9fa230640be7e11c573ca9","Node name for S&R":"WanVideoVAELoader","widget_ue_connectable":{}},"widgets_values":["Wan2_1_VAE_bf16.safetensors","fp16"],"color":"#322","bgcolor":"#533"},{"id":33,"type":"Note","pos":[-77.13651275634766,-474.3533020019531],"size":[359.0753479003906,88],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["Models:\nhttps://huggingface.co/Kijai/WanVideo_comfy/tree/main"],"color":"#432","bgcolor":"#653"},{"id":52,"type":"WanVideoTeaCache","pos":[1335.8887939453125,-637.9820556640625],"size":[315,178],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"rel_l1_thresh","name":"rel_l1_thresh","type":"FLOAT","widget":{"name":"rel_l1_thresh"},"link":null},{"localized_name":"start_step","name":"start_step","type":"INT","widget":{"name":"start_step"},"link":null},{"localized_name":"end_step","name":"end_step","type":"INT","widget":{"name":"end_step"},"link":null},{"localized_name":"cache_device","name":"cache_device","type":"COMBO","widget":{"name":"cache_device"},"link":null},{"localized_name":"use_coefficients","name":"use_coefficients","type":"BOOLEAN","widget":{"name":"use_coefficients"},"link":null},{"localized_name":"mode","name":"mode","shape":7,"type":"COMBO","widget":{"name":"mode"},"link":null}],"outputs":[{"localized_name":"cache_args","name":"cache_args","type":"CACHEARGS","links":[56]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b5cae8bf1a7b348e9c9fa230640be7e11c573ca9","Node name for S&R":"WanVideoTeaCache","widget_ue_connectable":{}},"widgets_values":[0.20000000000000004,2,-1,"offload_device","true","e"]},{"id":53,"type":"Note","pos":[1331.427734375,-792.0192260742188],"size":[308.7097473144531,88],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["TeaCache could be considered to be sort of an automated step skipper \n"],"color":"#432","bgcolor":"#653"},{"id":22,"type":"WanVideoModelLoader","pos":[-134.00701904296875,-327.5857849121094],"size":[477.4410095214844,274],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"compile_args","name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":null},{"localized_name":"block_swap_args","name":"block_swap_args","shape":7,"type":"BLOCKSWAPARGS","link":50},{"localized_name":"lora","name":"lora","shape":7,"type":"WANVIDLORA","link":null},{"localized_name":"vram_management_args","name":"vram_management_args","shape":7,"type":"VRAM_MANAGEMENTARGS","link":null},{"localized_name":"vace_model","name":"vace_model","shape":7,"type":"VACEPATH","link":null},{"localized_name":"fantasytalking_model","name":"fantasytalking_model","shape":7,"type":"FANTASYTALKINGMODEL","link":null},{"localized_name":"multitalk_model","name":"multitalk_model","shape":7,"type":"MULTITALKMODEL","link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"base_precision","name":"base_precision","type":"COMBO","widget":{"name":"base_precision"},"link":null},{"localized_name":"quantization","name":"quantization","type":"COMBO","widget":{"name":"quantization"},"link":null},{"localized_name":"load_device","name":"load_device","type":"COMBO","widget":{"name":"load_device"},"link":null},{"localized_name":"attention_mode","name":"attention_mode","shape":7,"type":"COMBO","widget":{"name":"attention_mode"},"link":null}],"outputs":[{"localized_name":"model","name":"model","type":"WANVIDEOMODEL","slot_index":0,"links":[29]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b5cae8bf1a7b348e9c9fa230640be7e11c573ca9","Node name for S&R":"WanVideoModelLoader","widget_ue_connectable":{}},"widgets_values":["Wan2_1-T2V-1_3B_fp8_e4m3fn.safetensors","fp16","fp8_e4m3fn","offload_device","sdpa"],"color":"#223","bgcolor":"#335"},{"id":27,"type":"WanVideoSampler","pos":[1357.052734375,-396.2536315917969],"size":[315,810],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"WANVIDEOMODEL","link":29},{"localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","link":76},{"localized_name":"text_embeds","name":"text_embeds","shape":7,"type":"WANVIDEOTEXTEMBEDS","link":30},{"localized_name":"samples","name":"samples","shape":7,"type":"LATENT","link":null},{"localized_name":"feta_args","name":"feta_args","shape":7,"type":"FETAARGS","link":null},{"localized_name":"context_options","name":"context_options","shape":7,"type":"WANVIDCONTEXT","link":null},{"localized_name":"cache_args","name":"cache_args","shape":7,"type":"CACHEARGS","link":56},{"localized_name":"flowedit_args","name":"flowedit_args","shape":7,"type":"FLOWEDITARGS","link":null},{"localized_name":"slg_args","name":"slg_args","shape":7,"type":"SLGARGS","link":null},{"localized_name":"loop_args","name":"loop_args","shape":7,"type":"LOOPARGS","link":null},{"localized_name":"experimental_args","name":"experimental_args","shape":7,"type":"EXPERIMENTALARGS","link":null},{"localized_name":"sigmas","name":"sigmas","shape":7,"type":"SIGMAS","link":null},{"localized_name":"unianimate_poses","name":"unianimate_poses","shape":7,"type":"UNIANIMATE_POSE","link":null},{"localized_name":"fantasytalking_embeds","name":"fantasytalking_embeds","shape":7,"type":"FANTASYTALKING_EMBEDS","link":null},{"localized_name":"uni3c_embeds","name":"uni3c_embeds","shape":7,"type":"UNI3C_EMBEDS","link":null},{"localized_name":"multitalk_embeds","name":"multitalk_embeds","shape":7,"type":"MULTITALK_EMBEDS","link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"shift","name":"shift","type":"FLOAT","widget":{"name":"shift"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"force_offload","name":"force_offload","type":"BOOLEAN","widget":{"name":"force_offload"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"riflex_freq_index","name":"riflex_freq_index","type":"INT","widget":{"name":"riflex_freq_index"},"link":null},{"localized_name":"denoise_strength","name":"denoise_strength","shape":7,"type":"FLOAT","widget":{"name":"denoise_strength"},"link":null},{"localized_name":"batched_cfg","name":"batched_cfg","shape":7,"type":"BOOLEAN","widget":{"name":"batched_cfg"},"link":null},{"localized_name":"rope_function","name":"rope_function","shape":7,"type":"COMBO","widget":{"name":"rope_function"},"link":null}],"outputs":[{"localized_name":"samples","name":"samples","type":"LATENT","slot_index":0,"links":[33]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b5cae8bf1a7b348e9c9fa230640be7e11c573ca9","Node name for S&R":"WanVideoSampler","widget_ue_connectable":{}},"widgets_values":[18,5.000000000000001,5.000000000000001,134719578189076,"randomize",true,"unipc",0,1,false,"comfy"]},{"id":16,"type":"WanVideoTextEncode","pos":[438.8819274902344,-333.2600402832031],"size":[420.30511474609375,261.5306701660156],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"t5","name":"t5","type":"WANTEXTENCODER","link":15},{"localized_name":"model_to_offload","name":"model_to_offload","shape":7,"type":"WANVIDEOMODEL","link":null},{"localized_name":"positive_prompt","name":"positive_prompt","type":"STRING","widget":{"name":"positive_prompt"},"link":null},{"localized_name":"negative_prompt","name":"negative_prompt","type":"STRING","widget":{"name":"negative_prompt"},"link":null},{"localized_name":"force_offload","name":"force_offload","shape":7,"type":"BOOLEAN","widget":{"name":"force_offload"},"link":null}],"outputs":[{"localized_name":"text_embeds","name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","slot_index":0,"links":[30]}],"title":"WanVideo TextEncode - Write Your Prompt Here","properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b5cae8bf1a7b348e9c9fa230640be7e11c573ca9","Node name for S&R":"WanVideoTextEncode","widget_ue_connectable":{}},"widgets_values":["a beautiful woman laughing","cartoon, 3d, cgi, painting, video game, jpg artifacts, compression, distortion, morphing, low-res, fake, oversaturated, overexposed, over bright, strange behavior, distorted limbs, unnatural motion, unrealistic anatomy, glitch, extra limbs,  ",true],"color":"#332922","bgcolor":"#593930"},{"id":30,"type":"VHS_VideoCombine","pos":[2140.8818359375,-414.9534912109375],"size":[548.4681396484375,1272.8192138671875],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":36},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"a7ce59e381934733bfae03b1be029756d6ce936d","Node name for S&R":"VHS_VideoCombine","widget_ue_connectable":{}},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"My_First_Video","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":18,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"My_First_Video_00026.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"My_First_Video_00026.png","fullpath":"D:\\SD MATRIX\\Data\\Packages\\ComfyUI\\output\\My_First_Video_00026.mp4"}}}},{"id":37,"type":"WanVideoEmptyEmbeds","pos":[468.7318115234375,60.14690399169922],"size":[315,106],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"control_embeds","name":"control_embeds","shape":7,"type":"WANVIDIMAGE_EMBEDS","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"num_frames","name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":null}],"outputs":[{"localized_name":"image_embeds","name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","links":[76]}],"title":"WanVideo Empty Embeds - Image Size","properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"b5cae8bf1a7b348e9c9fa230640be7e11c573ca9","Node name for S&R":"WanVideoEmptyEmbeds","widget_ue_connectable":{}},"widgets_values":[384,672,45],"color":"#2a363b","bgcolor":"#3f5159"},{"id":58,"type":"Note","pos":[895.0716552734375,-202.78553771972656],"size":[428.2908630371094,551.01220703125],"flags":{},"order":8,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["‚úÖ Recommended Resolutions for WAN Video\nAll dimensions divisible by 16 ‚Äì ideal for WAN and VAE compatibility\n\nüü© Standard 16:9 (Widescreen)\n512 √ó 288 (low-res test)\n768 √ó 432\n1024 √ó 576\n1152 √ó 648\n1280 √ó 720 (HD max)\n\nüü¶ Vertical Video / 9:16 (Reels & Mobile)\n384 √ó 672\n480 √ó 848\n576 √ó 1024\n640 √ó 1136\n704 √ó 1248\n\nüü• Square (1:1)\n512 √ó 512\n640 √ó 640\n768 √ó 768\n896 √ó 896\n1024 √ó 1024\n1152 √ó 1152 (max recommended)\n\nüü® Cinematic (2.39:1 or 21:9)\n800 √ó 336\n960 √ó 400\n1024 √ó 432\n1152 √ó 480\n1280 √ó 536\n\n‚ö†Ô∏è Tips for Stable Output\n‚Ä¢ Keep both width and height divisible by 16 to avoid model errors\n‚Ä¢ Avoid oddball aspect ratios or nonstandard shapes\n‚Ä¢ Match ControlNet input resolution to main video when using pose/reference\n‚Ä¢ Generate at 720p or 1024p, then upscale cleanly with Real-ESRGAN or Ultimate SD Upscaler for higher quality"],"color":"#432","bgcolor":"#653"}],"links":[[15,11,0,16,0,"WANTEXTENCODER"],[29,22,0,27,0,"WANVIDEOMODEL"],[30,16,0,27,2,"WANVIDEOTEXTEMBEDS"],[33,27,0,28,1,"LATENT"],[36,28,0,30,0,"IMAGE"],[43,38,0,28,0,"VAE"],[50,39,0,22,1,"BLOCKSWAPARGS"],[56,52,0,27,6,"TEACACHEARGS"],[76,37,0,27,1,"WANVIDIMAGE_EMBEDS"]],"groups":[{"id":2,"title":"Text to Video","bounding":[428.8913269042969,-20.72102928161621,414.7722473144531,203.9359588623047],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.7088742511245927,"offset":[-41.949648547105994,556.8025235326345]},"node_versions":{"ComfyUI-WanVideoWrapper":"5a2383621a05825d0d0437781afcb8552d9590fd","comfy-core":"0.3.26","ComfyUI-VideoHelperSuite":"0a75c7958fe320efcb052f1d9f8451fd20c730a8"},"VHS_latentpreview":true,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"ue_links":[],"links_added_by_ue":[]},"version":0.4}